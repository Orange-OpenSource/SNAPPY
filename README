SNAPPY Patch
============

This repository contains a patched kernel version with SNAPPY.

SNAPPY (Safe Namespaceable And Pro-grammable PolicY) is a new framework that allows even unprivileged processes such as containers to safely and dynamically enforce inthe kernel fine-grained, stackable and programmable eBPF security policies at runtime. SNAPPY is built as a Linux Security Module, leverages a new security-oriented namespace (policy_NS) and eBPF policies enriched with ’dynamic helpers’. This design especially allows to minimize containers’ attack surface. Our design may be applied to any processes but is particularly suitable for container-based use cases

You can find more information about SNAPPY in the assoricated research article : " SNAPPY: Programmable Kernel-Level Policies for Containers, Belair, Maxime and Laniepce, Sylvie and Menaud, Jean-Marc, SAC 2021 : 36th ACM/SIGAPP Symposium On Applied Computing, https://doi.org/10.1145/3412841.3442037 "

The source code of SNAPPY is mainly contained in /security/lsmpp directory

Usage: Compile the kernel and enable SNAPPY in kernel's configuration. You can then load security policies (see examples in samples/bpf/)

** NOTE: This code is not ready from production and DOES contain bugs and vulnerabilities that remains to be fixed. DO NOT USE THIS VERSION IN PRODUCTION **

Installation:
=============

To install this kernel you must enable the following configuration options:

- CONFIG_SECURITY=y
- CONFIG_SECURITYFS=y
- CONFIG_BPF=y
- CONFIG_BPF_SYSCALL=y
- CONFIG_LSMPP_NS=y
- CONFIG_SECURITY_WRITABLE_HOOKS=y
- CONFIG_SECURITY_LSMPP=y
- CONFIG_SECURITY_LSMPP_ENFORCE=y
- CONFIG_SECURITY_LSM="lsmpp,<other_LSMs_to_enable>"

Note: if you dont find, `CONFIG_SECURITY_LSMPP` and `CONFIG_SECURITY_LSMPP_ENFORCE` begin by enabling the other options.

Linux kernel
============

There are several guides for kernel developers and users. These guides can
be rendered in a number of formats, like HTML and PDF. Please read
Documentation/admin-guide/README.rst first.

In order to build the documentation, use ``make htmldocs`` or
``make pdfdocs``.  The formatted documentation can also be read online at:

    https://www.kernel.org/doc/html/latest/

There are various text files in the Documentation/ subdirectory,
several of them using the Restructured Text markup notation.

Please read the Documentation/process/changes.rst file, as it contains the
requirements for building and running the kernel, and information about
the problems which may result by upgrading your kernel.
